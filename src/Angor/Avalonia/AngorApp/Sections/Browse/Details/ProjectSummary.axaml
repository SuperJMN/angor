<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:zc="clr-namespace:Zafiro.Avalonia.Controls;assembly=Zafiro.Avalonia"
             xmlns:dt="clr-namespace:AngorApp.Sections.Browse.Details"
             xmlns:i="https://github.com/projektanker/icons.avalonia"
             xmlns:controls="clr-namespace:AngorApp.UI.Controls"
             mc:Ignorable="d" d:DesignWidth="300"
             x:Class="AngorApp.Sections.Browse.Details.ProjectSummary" x:DataType="dt:IProjectDetailsViewModel">

    <Design.DataContext>
        <dt:ProjectDetailsViewModelDesign />
    </Design.DataContext>

    <Card Header="Project Summary" Subheader="Key metrics and progress tracking">
        <Card.HeaderStartContent>
            <i:Icon FontSize="40" Value="fa-solid fa-chart-line" />
        </Card.HeaderStartContent>

        <StackPanel Spacing="25" Margin="0 10 0 0">
            <!-- Progress Overview Cards -->
            <BalancedWrapGrid MinItemWidth="250" HorizontalSpacing="20" VerticalSpacing="20">
                <Card Theme="{StaticResource TransparentCard}"
                      Header="Timeline Progress"
                      Subheader="{Binding CurrentDays, StringFormat={}{0} days elapsed}">
                    <Card.HeaderStartContent>
                        <i:Icon FontSize="30" Value="fa-solid fa-calendar-check" />
                    </Card.HeaderStartContent>
                    <Card.Content>
                        <StackPanel Spacing="15">
                            <Panel Height="100">
                                <zc:CircularProgressBar MaxWidth="80"
                                                        Maximum="{Binding TotalDays}"
                                                        Value="{Binding CurrentDays}"
                                                        Foreground="{DynamicResource SystemAccentColor}" />
                                <TextBlock VerticalAlignment="Center"
                                           HorizontalAlignment="Center"
                                           FontSize="14"
                                           FontWeight="Bold">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0}/{1}">
                                            <Binding Path="CurrentDays" />
                                            <Binding Path="TotalDays" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </Panel>
                            <TextBlock Text="{Binding TotalDays, StringFormat='Total: {0} days'}"
                                       HorizontalAlignment="Center"
                                       FontSize="12"
                                       Opacity="0.7" />
                        </StackPanel>
                    </Card.Content>
                </Card>

                <Card Theme="{StaticResource TransparentCard}"
                      Header="Funding Progress"
                      Subheader="{Binding CurrentInvestment, StringFormat={}{0:F2} TBTC raised}">
                    <Card.HeaderStartContent>
                        <i:Icon FontSize="30" Value="fa-solid fa-coins" />
                    </Card.HeaderStartContent>
                    <Card.Content>
                        <StackPanel Spacing="15">
                            <Panel Height="100">
                                <zc:CircularProgressBar MaxWidth="80"
                                                        x:Name="Funding"
                                                        Maximum="{Binding TotalInvestment}"
                                                        Value="{Binding CurrentInvestment}"
                                                        Foreground="Orange" />
                                <TextBlock Text="{Binding #Funding.Proportion, StringFormat={}{0:P0}}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center"
                                           FontSize="14"
                                           FontWeight="Bold"
                                           Foreground="Orange" />
                            </Panel>
                            <TextBlock Text="{Binding TotalInvestment, StringFormat='Target: {0:F2} TBTC'}"
                                       HorizontalAlignment="Center"
                                       FontSize="12"
                                       Opacity="0.7" />
                        </StackPanel>
                    </Card.Content>
                </Card>
            </BalancedWrapGrid>

            <Card Theme="{StaticResource TransparentCard}" Header="Project Information" Subheader="Key project details and metrics">
                <StackPanel Classes="BigGap" Grid.IsSharedSizeScope="True">
                    <EdgePanel Theme="{StaticResource PropertyEdgePanel}" StartContentTemplate="{StaticResource RegularIcon}" StartContent="{Icon fa-bullseye}" Content="Target amount"
                               EndContent="{Binding Project.TargetAmount.DecimalString}" />
                    <EdgePanel Theme="{StaticResource PropertyEdgePanel}" StartContentTemplate="{StaticResource RegularIcon}" StartContent="{Icon fa-solid fa-clock}" Content="Penalty duration"
                               EndContent="{Binding Project.PenaltyDuration, Converter={x:Static controls:AngorConverters.HumanizeTimeSpan}}" />

                    <EdgePanel Theme="{StaticResource PropertyEdgePanel}" StartContentTemplate="{StaticResource RegularIcon}" StartContent="{Icon fa-solid fa-calendar-days}" Content="Project dates">
                        <EdgePanel.EndContent>
                            <StackPanel>
                                <TextBlock HorizontalAlignment="Right" Text="{Binding Project.StartDate, StringFormat=d}" />
                                <TextBlock HorizontalAlignment="Right" Text="{Binding Project.EndDate, StringFormat=d}" />
                            </StackPanel>
                        </EdgePanel.EndContent>
                    </EdgePanel>
                    <EdgePanel Theme="{StaticResource PropertyEdgePanel}" StartContentTemplate="{StaticResource RegularIcon}" StartContent="{Icon fa-solid fa-users}" Content="Total raised"
                               EndContent="{Binding Project.TotalRaised.DecimalString}" />
                    <EdgePanel Theme="{StaticResource PropertyEdgePanel}" StartContentTemplate="{StaticResource RegularIcon}" StartContent="{Icon fa-solid fa-calculator}" Content="Total investors"
                               EndContent="{Binding Project.TotalInvestors}" />
                    <Separator />
                    <HyperlinkButton HorizontalAlignment="Stretch">
                        <DockPanel HorizontalSpacing="15">
                            <ContentControl Content="{Icon fa-solid fa-external-link-alt}" />
                            <TextBlock TextWrapping="Wrap">View the transaction on the explorer</TextBlock>
                        </DockPanel>
                    </HyperlinkButton>
                    <!-- <controls:SectionItem Theme="{StaticResource Basic}"> -->
                    <!--     <controls:SectionItem.LeftContent> -->
                    <!--         <i:Icon FontSize="20" Value="fa-solid fa-bullseye" /> -->
                    <!--     </controls:SectionItem.LeftContent> -->
                    <!--     <controls:SectionItem.Content> -->
                    <!--         <MultiBinding Converter="{x:Static converters:ZafiroStringConverters.JoinWithSpaces}"> -->
                    <!--             <Binding> -->
                    <!--                 <Binding.Source>Target amount:</Binding.Source> -->
                    <!--             </Binding> -->
                    <!--             <Binding Path="Project.TargetAmount.DecimalString"  /> -->
                    <!--         </MultiBinding> -->
                    <!--     </controls:SectionItem.Content> -->
                    <!-- </controls:SectionItem> -->
                    <!-- -->
                    <!-- <controls:SectionItem Theme="{StaticResource Basic}"> -->
                    <!--     <controls:SectionItem.LeftContent> -->
                    <!--         <i:Icon FontSize="20" Value="fa-solid fa-clock" /> -->
                    <!--     </controls:SectionItem.LeftContent> -->
                    <!--     <controls:SectionItem.Content> -->
                    <!--         <MultiBinding Converter="{x:Static converters:ZafiroStringConverters.JoinWithSpaces}"> -->
                    <!--             <Binding> -->
                    <!--                 <Binding.Source>Penalty duration:</Binding.Source> -->
                    <!--             </Binding> -->
                    <!--             <Binding Path="Project.PenaltyDuration" Converter="{x:Static controls:AngorConverters.HumanizeTimeSpan}" /> -->
                    <!--         </MultiBinding> -->
                    <!--     </controls:SectionItem.Content> -->
                    <!-- </controls:SectionItem> -->
                    <!-- -->
                    <!-- <controls:SectionItem Theme="{StaticResource Basic}" Content="Project dates: 07/12/2024 - 05/04/2025"> -->
                    <!--     <controls:SectionItem.LeftContent> -->
                    <!--         <i:Icon FontSize="20" Value="fa-solid fa-calendar-days" /> -->
                    <!--     </controls:SectionItem.LeftContent> -->
                    <!-- </controls:SectionItem> -->
                    <!-- -->
                    <!-- <Separator /> -->
                    <!-- -->
                    <!-- <UniformGrid Rows="1" ColumnSpacing="20"> -->
                    <!--     <controls:SectionItem Theme="{StaticResource Basic}" Content="Total Raised: 0 TBTC"> -->
                    <!--         <controls:SectionItem.LeftContent> -->
                    <!--             <i:Icon FontSize="20" Value="fa-solid fa-calculator" /> -->
                    <!--         </controls:SectionItem.LeftContent> -->
                    <!--     </controls:SectionItem> -->
                    <!--      -->
                    <!--     <controls:SectionItem Theme="{StaticResource Basic}" Content="Total Investors: 0"> -->
                    <!--         <controls:SectionItem.LeftContent> -->
                    <!--             <i:Icon FontSize="20" Value="fa-solid fa-users" /> -->
                    <!--         </controls:SectionItem.LeftContent> -->
                    <!--     </controls:SectionItem> -->
                    <!-- </UniformGrid> -->
                    <!-- -->
                    <!-- <HyperlinkButton HorizontalAlignment="Stretch"  -->
                    <!--                 Padding="15"  -->
                    <!--                 Margin="0,10,0,0" -->
                    <!--                 Background="{DynamicResource SystemChromeLowColor}" -->
                    <!--                 CornerRadius="8"> -->
                    <!--     <controls:SectionItem Theme="{StaticResource Basic}" Content="View the transaction on the explorer"> -->
                    <!--         <controls:SectionItem.LeftContent> -->
                    <!--             <i:Icon FontSize="20" Value="fa-solid fa-external-link-alt" /> -->
                    <!--         </controls:SectionItem.LeftContent> -->
                    <!--     </controls:SectionItem> -->
                    <!-- </HyperlinkButton> -->
                </StackPanel>
            </Card>
            <!-- </Card> -->
        </StackPanel>
    </Card>
</UserControl>